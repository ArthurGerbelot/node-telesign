[![NPM version][npm-version-image]][npm-url] [![NPM downloads][npm-downloads-image]][npm-url] [![MIT License][license-image]][license-url] [![Build Status][travis-image]][travis-url]

# TeleSign SDK for NodeJS

A NodeJS wrapper for the TeleSign REST APIs.

Install via npm:

    npm install --save telesign

## SDK Setup

Require the module and call ``setup()``:

    var telesign = require('telesign').setup({
      customerId: 'AAAAAAAA-BBBB-CCCC-DDDD-EEEEEEEEEEEE',
      apiKey: 'your/APIKey=='
    });

You can find your Customer ID and API Key on the TelePortal at [https://teleportal.telesign.com/](https://teleportal.telesign.com/) (leave your API Key in the base64 format as listed).

#### Optional Setup Parameters

- ``version`` - API version *defaults to '1'*
- ``authMethod`` - either ``sha1`` or ``sha256`` *defaults to 'sha1'*
- ``timeout`` - request timeout, in milliseconds, before returning an error *defaults to 3000*

## Available Endpoints

For resources that require a ``phoneNumber``, provide a "complete phone number composed of a string of digits without spaces or punctuation, beginning with the Country Dialing Code (e.g., “1” for North America)."

For resources that require a ``ucid``, see the list of available Use Case Codes at [http://docs.telesign.com/rest/content/xt/xt-use-case-codes.html#xref-use-case-codes](http://docs.telesign.com/rest/content/xt/xt-use-case-codes.html#xref-use-case-codes).

### PhoneID

#### Standard

The PhoneID Standard web service returns information about a specified phone numbers:

- type
- numbering structure
- cleansing details
- location

    var options = {
      phoneNumber: '15555555', // required
    };

    telesign.phoneId.score(options, function(err, response) {
      // returns an err on failed request
      // or when TeleSign returns an error
    });

#### Score

The PhoneID Score web service provides risk information about a specified phone number.

    var options = {
      phoneNumber: '15555555', // required
      ucid: 'BACF' // required
    };

    telesign.phoneId.score(options, function(err, response) {
      // returns an err on failed request
      // or when TeleSign returns an error
    });

#### Contact

The PhoneID Contact web service provides contact details for a specified phone number’s subscriber. You can use it to find a subscriber’s:

- First Name
- Last Name
- Street Address
- City
- State (or Province)
- Country
- ZIP Code

    var options = {
      phoneNumber: '15555555', // required
      ucid: 'BACF' // required
    };

    telesign.phoneId.contact(options, function(err, response) {
      // returns an err on failed request
      // or when TeleSign returns an error
    });

#### Live

The PhoneID Live web service provides information about a specified phone number’s state of operation. You can use it to find out:

- if the line is in service
- if the number is reachable
- if the mobile phone is roaming, and if so, in which country

**Note: The information returned by PhoneID Live includes the information returned by PhoneID Standard.**

    var options = {
      phoneNumber: '15555555', // required
      ucid: 'BACF' // required
    };

    telesign.phoneId.live(options, function(err, response) {
      // returns an err on failed request
      // or when TeleSign returns an error
    });

### Verify

#### Get the Verification Results

Once a verificaiton has been placed via call or SMS, you can get the results of the verification at any time using the reference ID that is sent back after your verification request is placed.

    telesign.verify.get({
      referenceId: '11111BB222A33F44444444DDCCA1FC33'
    }, function(err, response) {
      // returns an err on failed request
      // or when TeleSign returns an error
    });

#### Call

The TeleSign Verify Call web service sends a verification code to your end user in a voice message with a phone call.

    var options = {
      phoneNumber: '15555555', // required
      ucid: 'BACF', // optional
      originatingIp: '', // optional
      language: '', // optional, defaults to 'en-US'
      verifyCode: 12345, // optional, defaults to random value generated by TeleSign
      extensionType: 1, // optional, 1 for automated attendants, 2 for live operators, not included by default
      extensionTemplate: '1,,333' // optional, required if extensionType is specified, not included by default,
      redial: true // optional, defaults to true
    };

    telesign.phoneId.live(options, function(err, response) {
      // returns an err on failed request
      // or when TeleSign returns an error
    });

#### SMS

The TeleSign Verify SMS web service sends a verification code to your end user in a text message.

    var options = {
      phoneNumber: '15555555', // required
      ucid: 'BACF', // optional
      originatingIp: '', // optional
      language: '', // optional, defaults to 'en-US'
      verifyCode: 12345, // optional, defaults to random value generated by TeleSign
      template: 'Your code is $$CODE$$' // optional, must include a literal $$CODE$$ placeholder to integrate the verifyCode token
    };

    telesign.phoneId.live(options, function(err, response) {
      // returns an err on failed request
      // or when TeleSign returns an error
    });

[license-image]: http://img.shields.io/badge/license-MIT-blue.svg?style=flat-square
[license-url]: https://github.com/giftnix/telesign/blob/master/LICENSE

[npm-version-image]: http://img.shields.io/npm/v/telesign.svg?style=flat-square
[npm-downloads-image]: http://img.shields.io/npm/dm/telesign.svg?style=flat-square
[npm-url]: https://npmjs.org/package/telesign

[travis-image]: http://img.shields.io/travis/giftnix/telesign.svg?style=flat-square
[travis-url]: http://travis-ci.org/giftnix/telesign